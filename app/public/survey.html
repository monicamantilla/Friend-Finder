<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
   
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>Survey</title>
</head>
<body>
    
    <div class="container">
        <h1 class="text-center m-5">Friend Finder Quiz</h1>
    
        <!-- form -->
        <form id="friend-form">
            <div class="user-info">
                Name<br>
                <input type="text" name="name" style="width: 100%;" required><br>
                Link to photo<br>
                <input type="text" name="photo" style="width: 100%;" required><br>
            </div>
            <div class="question">
                <strong style="font-size: 1.5em;">Question 1</strong><br>
                I tend to be quiet.<br>
                <input type="radio" name="q1" value="1" required> Strongly Agree<br>
                <input type="radio" name="q1" value="2"> Agree<br>
                <input type="radio" name="q1" value="3"> Neutral<br>
                <input type="radio" name="q1" value="4"> Disagree<br>
                <input type="radio" name="q1" value="5"> Strongly Disagree<br>
            </div>
            <div class="question">
                <strong style="font-size: 1.5em;">Question 2</strong><br>
                I am compassionate and have a soft heart.<br>
                <input type="radio" name="q2" value="1" required> Strongly Agree<br>
                <input type="radio" name="q2" value="2"> Agree<br>
                <input type="radio" name="q2" value="3"> Neutral<br>
                <input type="radio" name="q2" value="4"> Disagree<br>
                <input type="radio" name="q2" value="5"> Strongly Disagree<br>
            </div>
            <div class="question">
                <strong style="font-size: 1.5em;">Question 3</strong><br>
                I am fascinated by art, music or literature.<br>
                <input type="radio" name="q3" value="1" required> Strongly Agree<br>
                <input type="radio" name="q3" value="2"> Agree<br>
                <input type="radio" name="q3" value="3"> Neutral<br>
                <input type="radio" name="q3" value="4"> Disagree<br>
                <input type="radio" name="q3" value="5"> Strongly Disagree<br>
            </div>
            <div class="question">
                <strong style="font-size: 1.5em;">Question 4</strong><br>
                I am full of energy.<br>
                <input type="radio" name="q4" value="1" required> Strongly Agree<br>
                <input type="radio" name="q4" value="2"> Agree<br>
                <input type="radio" name="q4" value="3"> Neutral<br>
                <input type="radio" name="q4" value="4"> Disagree<br>
                <input type="radio" name="q4" value="5"> Strongly Disagree<br>
            </div>
            <div class="question">
                <strong style="font-size: 1.5em;">Question 5</strong><br>
                I am reliable and can always be counted on.<br>
                <input type="radio" name="q5" value="1" required> Strongly Agree<br>
                <input type="radio" name="q5" value="2"> Agree<br>
                <input type="radio" name="q5" value="3"> Neutral<br>
                <input type="radio" name="q5" value="4"> Disagree<br>
                <input type="radio" name="q5" value="5"> Strongly Disagree<br>
            </div>
            <div class="question">
                <strong style="font-size: 1.5em;">Question 6</strong><br>
                People can rarely upset you.<br>
                <input type="radio" name="q6" value="1" required> Strongly Agree<br>
                <input type="radio" name="q6" value="2"> Agree<br>
                <input type="radio" name="q6" value="3"> Neutral<br>
                <input type="radio" name="q6" value="4"> Disagree<br>
                <input type="radio" name="q6" value="5"> Strongly Disagree<br>
            </div>
            <div class="question">
                <strong style="font-size: 1.5em;">Question 7</strong><br>
                I am relaxed and handle stress well.<br>
                <input type="radio" name="q7" value="1" required> Strongly Agree<br>
                <input type="radio" name="q7" value="2"> Agree<br>
                <input type="radio" name="q7" value="3"> Neutral<br>
                <input type="radio" name="q7" value="4"> Disagree<br>
                <input type="radio" name="q7" value="5"> Strongly Disagree<br>
            </div>
            <div class="question">
                <strong style="font-size: 1.5em;">Question 8</strong><br>
                I am reliable and can always be counted on..<br>
                <input type="radio" name="q8" value="1" required> Strongly Agree<br>
                <input type="radio" name="q8" value="2"> Agree<br>
                <input type="radio" name="q8" value="3"> Neutral<br>
                <input type="radio" name="q8" value="4"> Disagree<br>
                <input type="radio" name="q8" value="5"> Strongly Disagree<br>
            </div>
            <div class="question">
                <strong style="font-size: 1.5em;">Question 9</strong><br>
                You rarely worry if you made a good impression on someone you met.<br>
                <input type="radio" name="q9" value="1" required> Strongly Agree<br>
                <input type="radio" name="q9" value="2"> Agree<br>
                <input type="radio" name="q9" value="3"> Neutral<br>
                <input type="radio" name="q9" value="4"> Disagree<br>
                <input type="radio" name="q9" value="5"> Strongly Disagree<br>
            </div>
            <div class="question">
                <strong style="font-size: 1.5em;">Question 10</strong><br>
                I am persistent and work until the task is finished.<br>
                <input type="radio" name="q10" value="1" required> Strongly Agree<br>
                <input type="radio" name="q10" value="2"> Agree<br>
                <input type="radio" name="q10" value="3"> Neutral<br>
                <input type="radio" name="q10" value="4"> Disagree<br>
                <input type="radio" name="q10" value="5"> Strongly Disagree<br>
            </div>
            <button type="submit" class="btn btn-lg btn-primary m-5">Submit</button>
        </form>
    
    
        <!-- Modal -->
        <div class="modal fade" id="friendModal" tabindex="-1" role="dialog"
            aria-labelledby="friendModal" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLongTitle" style="color: black;">Your best match</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body text-center" id="friend-result" style="color: black;">
                        
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- jquery -->
    <script src="https://code.jquery.com/jquery.js"></script>

    <!-- bootstrap js -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <!-- javascript -->
    <script>
        $('#friend-form').on('submit', () => {
            event.preventDefault()
            let newFriend = {
                name: $('input[name="name"]').val().trim(),
                photo: $('input[name="photo"]').val().trim(),
                scores: [
                    $('input[name="q1"]:checked').val().trim(),
                    $('input[name="q2"]:checked').val().trim(),
                    $('input[name="q3"]:checked').val().trim(),
                    $('input[name="q4"]:checked').val().trim(),
                    $('input[name="q5"]:checked').val().trim(),
                    $('input[name="q6"]:checked').val().trim(),
                    $('input[name="q7"]:checked').val().trim(),
                    $('input[name="q8"]:checked').val().trim(),
                    $('input[name="q9"]:checked').val().trim(),
                    $('input[name="q10"]:checked').val().trim()
                ]
            }
            $.post('/api/friends', newFriend)
                .then( data => {
                    console.log(`name: ${data.name} \nphoto: ${data.photo} \nscores: ${data.scores}`)
                    $('#friend-result').html(
                        `
                            <img src=${data.photo} width=50% height=auto alt="no photo available">
                            <h1>${data.name}</h1>
                        `
                    )
                    $('#friendModal').modal('toggle')
                })
        })
    </script>
</body>
</html>